(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),c=(n(72),n(17)),s=n(7),u=n(60),l=n(61),d=n(111),m=n(15),p=n(29),h=n(114),f=n(113),g=n(112),v=n(110),b=n(36),E=n(63),O=n.n(E).a.create({baseURL:"https://suhasjwt.herokuapp.com/"}),y=function(e,t){var n=e.username,a=e.password;return function(e){e({type:"ISLOADING",isLoading:!0}),O.post("api/token/",{username:n,password:a}).then(function(n){var a={isAuthenticated:!0,accessToken:n.data.access,refreshToken:n.data.refresh,statusCode:200,errMsg:""};console.log(a),localStorage.setItem("Auth",JSON.stringify(a)),e({type:"AUTH",payload:Object.assign({},a)}),t.push("/"),e({type:"ISLOADING",isLoading:!1})}).catch(function(t){var n={isAuthenticated:!1,accessToken:"",refreshToken:"",statusCode:t.response.status,errMsg:t.response.data.detail};localStorage.setItem("Auth",JSON.stringify(n)),e({type:"AUTH",payload:Object.assign({},n)}),e({type:"ISLOADING",isLoading:!1})})}},L=function(){return function(e){localStorage.removeItem("Auth"),e({type:"AUTH"})}},A=function(){return function(e){e({type:"ISLOADING",isLoading:!0}),O.get("public/").then(function(t){e({type:"HOME",payload:Object.assign({},t.data)}),e({type:"ISLOADING",isLoading:!1})}).catch(function(t){console.log(t),e({type:"ISLOADING",isLoading:!1})})}},j=function(){return function(e,t){e({type:"ISLOADING",isLoading:!0});var n={headers:{Authorization:"Bearer ".concat(t().Auth.accessToken)}};O.get("protected/",n).then(function(t){e({type:"PROTECTED",payload:Object.assign({},t.data)}),e({type:"ISLOADING",isLoading:!1})}).catch(function(t){console.log(t),e(L()),e({type:"ISLOADING",isLoading:!1})})}},w=Object(s.b)(function(e){return{isAuthenticated:e.Auth.isAuthenticated}},function(e){return{onLogout:function(){e(L())}}})(function(e){return r.a.createElement(h.a,{bg:"light",expand:"lg"},r.a.createElement(b.LinkContainer,{to:"/"},r.a.createElement(h.a.Brand,null,"Home")),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(f.a,{className:"mr-auto"},e.isAuthenticated?r.a.createElement(b.LinkContainer,{to:"/protected"},r.a.createElement(f.a.Link,null,"Protected")):r.a.createElement(f.a.Link,{disabled:!0},"Protected"),e.isAuthenticated?r.a.createElement(g.a,{inline:!0},r.a.createElement(v.a,{variant:"primary",onClick:e.onLogout},"Logout")):r.a.createElement(b.LinkContainer,{to:"/login"},r.a.createElement(f.a.Link,null,"Login")))))}),k=n(116),I=Object(s.b)(function(e){return{isLoading:e.isLoading}})(function(e){return e.isLoading?r.a.createElement(k.a,{animated:!0,now:100}):r.a.createElement("div",null)}),C=n(23),N=n(24),S=n(28),T=n(25),D=n(27),P=function(e){function t(e){return Object(C.a)(this,t),Object(S.a)(this,Object(T.a)(t).call(this,e))}return Object(D.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.onHome()}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.Home)}}]),t}(a.Component),H=Object(s.b)(function(e){return{Home:e.Home.msg}},function(e){return{onHome:function(){e(A())}}})(P),G=function(e){function t(e){return Object(C.a)(this,t),Object(S.a)(this,Object(T.a)(t).call(this,e))}return Object(D.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.onProtected()}},{key:"render",value:function(){return r.a.createElement("div",null,this.props.Protected)}}]),t}(a.Component),_=Object(s.b)(function(e){return{Protected:e.Protected.msg}},function(e){return{onProtected:function(){e(j())}}})(G),M=n(19),U=n(115),R=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(S.a)(this,Object(T.a)(t).call(this,e))).state={isEmpty:!1},n.username_input=r.a.createRef(),n.password_input=r.a.createRef(),n.handle_submit=n.handle_submit.bind(Object(M.a)(n)),n}return Object(D.a)(t,e),Object(N.a)(t,[{key:"handle_submit",value:function(){var e=this.username_input.current.value.trim(),t=this.password_input.current.value.trim();e&&t?(this.setState({isEmpty:!1}),this.props.onLogin({username:e,password:t},this.props.history)):this.setState({isEmpty:!0})}},{key:"render",value:function(){return r.a.createElement(g.a,null,401===this.props.Auth.statusCode?r.a.createElement(U.a,{variant:"danger"},this.props.Auth.errMsg):r.a.createElement("div",null),this.state.isEmpty?r.a.createElement(U.a,{variant:"danger"},"Please provide all the parameters"):r.a.createElement("div",null),r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"User Name"),r.a.createElement(g.a.Control,{placeholder:"User Name",ref:this.username_input})),r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"Password"),r.a.createElement(g.a.Control,{type:"password",placeholder:"Password",ref:this.password_input})),r.a.createElement(v.a,{variant:"primary",onClick:this.handle_submit},"Login"),r.a.createElement(g.a.Text,{className:"text-muted"},"You can test with the ",r.a.createElement("b",null,"User Name: visitor, Password: 123"),", and also try with empty and invalid Credentials."))}}]),t}(a.Component),x=Object(m.k)(Object(s.b)(function(e){return{Auth:e.Auth}},function(e){return{onLogin:function(t,n){e(y(t,n))}}})(R)),B=function(e){var t=e.component,n=e.isAuthenticated,a=Object(l.a)(e,["component","isAuthenticated"]);return r.a.createElement(m.d,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(m.c,{to:{pathname:"/login",state:{from:e.location}}})}}))};B=Object(s.b)(function(e){return{isAuthenticated:e.Auth.isAuthenticated}},null)(B);var J=function(e){return r.a.createElement(p.BrowserRouter,null,r.a.createElement(I,null),r.a.createElement(w,null),r.a.createElement(d.a,{className:"pt-5"},r.a.createElement(m.d,{path:"/",exact:!0,component:H}),r.a.createElement(m.d,{path:"/login",component:x}),r.a.createElement(B,{path:"/protected",component:_})))},W={isAuthenticated:!1,accessToken:"",refreshToken:"",statusCode:0,errMsg:""};var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return void 0===t.payload?W:t.payload;default:return e}};var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ISLOADING":return t.isLoading;default:return e}};var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{msg:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HOME":return t.payload;default:return e}};var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{msg:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROTECTED":return t.payload;default:return e}},F=Object(c.c)({Auth:z,isLoading:Y,Home:$,Protected:q});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=Object(c.d)(F,function(){try{var e=localStorage.getItem("Auth");if(null===e)return;return(e=JSON.parse(e)).statusCode=0,e.errMsg="",{Auth:e}}catch(t){return}}(),Object(c.a)(u.a));i.a.render(r.a.createElement(s.a,{store:K},r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},67:function(e,t,n){e.exports=n(108)}},[[67,1,2]]]);
//# sourceMappingURL=main.96e1096b.chunk.js.map